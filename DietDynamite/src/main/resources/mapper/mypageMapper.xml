<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mypageMapper">

	<resultMap id="userRm" type="User">
		<id property="userNo" column="USER_NO" />
		<result property="userId" column="USER_ID" />
		<result property="userPw" column="USER_PW" />
		<result property="userEmail" column="USER_EMAIL" />
		<result property="userNickname" column="USER_NICKNAME" />
		<result property="userBirthDay" column="USER_BD" />
		<result property="userGender" column="USER_GENDER" />
		<result property="userAuthority" column="USER_AUTHORITY" />
		<result property="userImage" column="USER_IMG" />
		<result property="createDate" column="CREATE_DT" />
		<result property="deleteDate" column="DELETE_DT" />
		<result property="userProfileHeight" column="USER_PROFILE_HEIGHT" />
		<result property="userProfileWeight" column="USER_PROFILE_WEIGHT" />
	</resultMap>


	<!-- 로그인 -->
	<select id="getAllUserInfo" resultMap="userRm">
		SELECT
		    USER_NO, USER_ID,
		    USER_EMAIL, USER_NICKNAME,USER_BD,
		    USER_GENDER,USER_AUTHORITY,
		    USER_IMG,
		    USER_AUTHORITY,USER_PROFILE_HEIGHT,USER_PROFILE_WEIGHT,
		    TO_CHAR(CREATE_DT, 'YYYY"년" MM"월" DD"일" HH24"시" MI"분" SS"초"') AS CREATE_DT,
		    TO_CHAR(DELETE_DT, 'YYYY"년" MM"월" DD"일" HH24"시" MI"분" SS"초"') AS DELETE_DT
		FROM "USER_INFO"
	</select>
	
	<update id="updateUserAuth">
		UPDATE USER_INFO SET USER_AUTHORITY = #{userAuthority}
		WHERE USER_NO = ${userNo}
	</update>
	
	<update id="deleteUser">
		UPDATE USER_INFO SET DELETE_DT = SYSDATE
		WHERE USER_NO = ${userNo}
	</update>
	
	<select id="searchUserInfo" resultMap="userRm">
		SELECT
		    USER_NO, USER_ID,
		    USER_EMAIL, USER_NICKNAME,USER_BD,
		    USER_GENDER,USER_AUTHORITY,
		    USER_IMG,
		    USER_AUTHORITY,USER_PROFILE_HEIGHT,USER_PROFILE_WEIGHT,
		    TO_CHAR(CREATE_DT, 'YYYY"년" MM"월" DD"일" HH24"시" MI"분" SS"초"') AS CREATE_DT,
		    TO_CHAR(DELETE_DT, 'YYYY"년" MM"월" DD"일" HH24"시" MI"분" SS"초"') AS DELETE_DT
		FROM "USER_INFO"
		WHERE ${searchType} LIKE '%${searchParam}%'
	</select>
	
</mapper>